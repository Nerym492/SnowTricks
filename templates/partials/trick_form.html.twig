{% extends 'base.html.twig' %}

{% block header %}{% endblock %}

{% block scripts_head %}
{% endblock %}

{% block content %}
    <div class="trick-container">
        {% include 'partials/header_trick.html.twig' with {headerImage: headerImage.fileName} %}

        {{ form_start(trickForm, {'attr': {'class': 'form', 'id': 'trick_form'}}) }}
        <h2>Images</h2>
        <div class="medias-container" id="images-list"
             data-prototype="{{ form_widget(trickForm.imagesTricks.vars.prototype)|e('html_attr') }}">
            {% for image in trickForm.imagesTricks %}
                <div id="trick_form_imagesTricks_{{ loop.index-1 }}" class="trick-image-item">
                    <div class="trick-image-preview">
                        {% if image.vars.value.fileName is empty %}
                            <img class="image-trick-details" src="/build/images/image-placeholder.webp" alt="">
                        {% else %}
                            <img class="image-trick-details" src="{{ path(
                                'get_trick_image',
                                {'trickName': trick.name,'imageName': image.vars.value.fileName}
                            ) }}" alt="Image {{ loop.index }}">
                        {% endif %}
                    </div>
                    {{ form_row(image.fileName) }}
                    <div class="image-file-actions">
                        {{ form_widget(image.file) }}
                        <a role="button" class="delete-image-btn" id="delete-img-btn-{{ loop.index-1 }}">
                            <i class="fa-solid fa-trash icon-delete-img"></i>
                        </a>
                    </div>
                </div>
            {% endfor %}
            <div class="trick-image-item" id="add-image-form-button">
                <div class="image-trick-details center">
                    <a role="button">
                        <i class="fa-solid fa-circle-plus icon-add-img"></i>
                    </a>
                </div>
            </div>
        </div>
        <div class="form-floating">
            {{ form_widget(trickForm.name) }}
            {{ form_label(trickForm.name) }}
        </div>
        <div class="form-floating">
            {{ form_widget(trickForm.description) }}
            {{ form_label(trickForm.description) }}
        </div>
        <div class="form-floating">
            {{ form_widget(trickForm.group_trick) }}
            {{ form_label(trickForm.group_trick) }}
        </div>
        <button type="submit" class="btn-submit">Save</button>
        {{ form_end(trickForm) }}
    </div>
{% endblock %}

{% block scripts_end_body %}
    {{ encore_entry_script_tags('trick') }}
{% endblock %}